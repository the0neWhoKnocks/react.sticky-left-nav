(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){e.exports=a(53)},53:function(e,t,a){"use strict";a.r(t);for(var n=a(4),r=a(5),o=a(7),l=a(6),i=a(3),c=a(8),s=a(1),u=a(0),p=a.n(u),d=a(15),h=a.n(d),m=a(2),f=Math.round(10)+3,b=[],g=0;g<4;g++)for(var v=0;v<f;v++)0===g?b.push("0px -".concat(v+1,"px 0px 0px ").concat("#000")):1===g?b.push("".concat(v+1,"px 0px 0px 0px ").concat("#000")):2===g?b.push("0px ".concat(v+1,"px 0px 0px ").concat("#000")):3===g&&b.push("-".concat(v+1,"px 0px 0px 0px ").concat("#000"));b=b.join(",");var C={root:Object(m.css)({font:"16px Helvetica, Arial, sans-serif",position:"relative"," .body":{paddingTop:"3.3em",position:"relative"}," .title-font":{fontFamily:"impact",color:"#444",letterSpacing:"1px"}," .results-interface":{display:"flex"}," .results-header":{"&__title":{transform:"scale(1)",transformOrigin:"left center",transition:"transform 200ms"},".is--sticky":{position:"fixed",left:0,right:0," .results-header__title":{transform:"scale(0.75)"}}}," .left-nav-wrapper":{minWidth:"200px",padding:"0.3em 0 1em 1em"}," .left-nav":{background:"#fff","&__wrapper-top-point,&__top-point,&__wrapper-btm-point,&__btm-point":{position:"absolute",left:"50%",transform:"translateY(-50%)"},"&__wrapper-top-point,&__top-point":{top:0},"&__wrapper-btm-point,&__btm-point":{bottom:0}}," .results":{flex:1,paddingLeft:"1em"}," .footer":{marginTop:"2em"},".debug":{" .left-nav-wrapper":{backgroundColor:"gray",backgroundImage:"repeating-linear-gradient(\n          -45deg,\n          #ddd,\n          #ddd ".concat(3,"px,\n          #fff ").concat(3,"px,\n          #fff ").concat(9,"px\n        )")}," .left-nav":{"&__wrapper-top-point,&__top-point,&__wrapper-btm-point,&__btm-point":{background:"#000",boxShadow:b,"::after":{content:"''",width:"".concat(20,"px"),height:"".concat(20,"px"),border:"solid 1px",borderRadius:"100%",display:"block",position:"absolute",transform:"translate(-50%, -50%)"}},"&__wrapper-top-point,&__wrapper-btm-point":{"::after":{background:"#00ff0020"}},"&__top-point,&__btm-point":{"::after":{background:"#ff000020"}}}}})},_={root:Object(m.css)({textAlign:"center",padding:"1em",background:"#eee"})},y=function(){return p.a.createElement("div",{className:"banner ".concat(_.root)},"Banner")},O={root:Object(m.css)({color:"#eee",textAlign:"center",padding:"1em",background:"#333"})},k=function(){return p.a.createElement("div",{className:"footer ".concat(O.root)},"Footer")},x=a(16),j=a.n(x),w={root:Object(m.css)({width:"1px",height:"1px",display:"inline-block",pointerEvents:"none"})},E=function(e){var t=e.className,a=e.type;return p.a.createElement("div",{className:"point ".concat(w.root," ").concat(t),"data-type":a})},N={color:"#333",whiteSpace:"nowrap",textDecoration:"none",padding:"0 0 0.4em",display:"block"},S={root:Object(m.css)({position:"relative"," .left-nav":{paddingBottom:"3em",paddingLeft:"".concat(12,"px"),marginLeft:"-".concat(12,"px"),overflow:"hidden",position:"relative","&__category-link":Object(n.a)({},N),"&__filter-group":{borderBottom:"solid 1px #666",margin:"0.75em 0"},"&__filter-group-btn":{padding:"0.5em 0",display:"block",cursor:"pointer",outline:"none",position:"relative",userSelect:"none","::after":{content:"\\002B",position:"absolute",top:"50%",right:0,transform:"translateY(-50%)"},":focus::before":{content:"''",width:"".concat(4,"px"),background:"#333",position:"absolute",top:"25%",bottom:"25%",left:"-".concat(8,"px")},".is--open::after":{content:"\\2212"}},"&__filter-group-content":{padding:"0.5em 0"},"&__filter-link":Object(n.a)({},N,{"::before":{content:"''",width:"1em",height:"1em",border:"solid 1px",marginRight:"0.5em",display:"inline-block",verticalAlign:"top"},".is--selected::before":{background:"#333"}}),"&__clear-btn":{width:"calc(100% - 1em)",color:"#eee",padding:"0.5em 1em",border:"none",background:"#333",cursor:"pointer",position:"absolute",top:"100%",left:"1em",transform:"translateY(0%)",transition:"transform 200ms"},".show--clear":{" .left-nav":{"&__clear-btn":{transform:"translateY(-134%)"}}}}})},A=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this))).state={filters:Object(n.a)({},e.filters),showClearFilters:!1},a.handleFilterClick=a.handleFilterClick.bind(Object(s.a)(Object(s.a)(a))),a}return Object(c.a)(t,e),Object(i.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var a={};return JSON.stringify(t.filters)!==JSON.stringify(e.filters)&&(a.filters=e.filters),Object.keys(a).length>0?a:null}}]),Object(i.a)(t,[{key:"handleFilterClick",value:function(e){e.preventDefault();var t=e.currentTarget.dataset,a=Object(n.a)({},this.state),r=!a.filters[t.filter][t.filterNdx].selected;r?a.showClearFilters=!0:r||this.selectedFiltersCount-1!==0||(a.showClearFilters=!1),a.filters[t.filter][t.filterNdx].selected=r,this.setState(a)}},{key:"noOp",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.props.categories,a=this.state,n=a.filters,r=a.showClearFilters,o=r?"show--clear":"";return p.a.createElement("div",{className:"left-nav-wrapper ".concat(S.root)},p.a.createElement(E,{className:"left-nav__wrapper-top-point",type:"wrapperTop"}),p.a.createElement("nav",{className:"left-nav ".concat(o)},p.a.createElement(E,{className:"left-nav__top-point",type:"navTop"}),t.map(function(t,a){return p.a.createElement("a",{key:a,className:"left-nav__category-link",href:t.url,onClick:e.noOp},t.label)}),Object.keys(n).map(function(t,a){var r=n[t];return 0===a&&(e.selectedFiltersCount=0),p.a.createElement(j.a,{key:a,className:"left-nav__filter-group",contentInnerClassName:"left-nav__filter-group-content",openedClassName:"left-nav__filter-group",tabIndex:0,transitionTime:200,trigger:t,triggerClassName:"left-nav__filter-group-btn title-font",triggerOpenedClassName:"left-nav__filter-group-btn title-font is--open"},r.map(function(a,n){var r=a.selected?"is--selected":"";return a.selected&&(e.selectedFiltersCount+=1),p.a.createElement("a",{key:n,className:"left-nav__filter-link ".concat(r),href:a.url,"data-filter":t,"data-filter-ndx":n,onClick:e.handleFilterClick},a.label)}))}),p.a.createElement("button",{className:"left-nav__clear-btn",disabled:!r},"Clear Filters"),p.a.createElement(E,{className:"left-nav__btm-point",type:"navBtm"})),p.a.createElement(E,{className:"left-nav__wrapper-btm-point",type:"wrapperBtm"}))}}]),t}(u.Component),F={root:Object(m.css)({width:"25%",padding:"0.25em",display:"inline-block"," img":{width:"100%",background:"#eee"}," h4":{padding:0,margin:0}," h6":{padding:0,margin:0}})},H=function(e){e.price;var t=e.subtitle,a=e.title;return p.a.createElement("div",{className:"product ".concat(F.root)},p.a.createElement("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",alt:"Item"}),p.a.createElement("h4",null,a),p.a.createElement("h6",null,t))},I=function(e){var t=e.items;return p.a.createElement("div",{className:"results"},t.map(function(e,t){return p.a.createElement(H,Object.assign({key:t},e))}))},D={root:Object(m.css)({padding:"1em",display:"flex",background:"#fff",zIndex:1," .results-header":{"&__title":{fontSize:"1.5em",lineHeight:"1.5em",flex:1},"&__nav":{lineHeight:"1.5em"},"&__sort":{marginTop:"0.6em"}}})},R=Object(u.forwardRef)(function(e,t){var a=e.headerClass,n=e.headerStyles,r=e.placeholderStyles,o=e.title;return p.a.createElement("div",{className:"results-header-placeholder",style:r},p.a.createElement("header",{className:"results-header ".concat(D.root," ").concat(a),ref:t,style:n},p.a.createElement("div",{className:"results-header__title title-font"},o),p.a.createElement("nav",{className:"results-header__nav"},p.a.createElement("select",{className:"results-header__sort"},p.a.createElement("option",null,"Opt 1"),p.a.createElement("option",null,"Opt 2"),p.a.createElement("option",null,"Opt 3"),p.a.createElement("option",null,"Opt 4")))))}),T=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(o.a)(this,Object(l.a)(t).call(this))).sanitize=e.sanitize.bind(Object(s.a)(Object(s.a)(e))),e}return Object(c.a)(t,e),Object(i.a)(t,[{key:"sanitize",value:function(e){var t=this.props,a=t.min,n=t.onChange,r=+e.currentTarget.value;n(r<a?a:r)}},{key:"render",value:function(){var e=this.props,t=e.label,a=e.value;return p.a.createElement("label",null,p.a.createElement("span",{className:"label-text"},t),p.a.createElement("input",{type:"number",onChange:this.sanitize,value:a}))}}]),t}(u.Component),B=a(11),Q={root:Object(m.css)(Object(B.a)({minHeight:"50%",padding:"1em",border:"solid 1px ".concat("#666"),borderRight:"none",borderRadius:"0.5em 0em 0em 0.5em",background:"#eee",position:"fixed",transition:"transform 200ms"," label":{margin:"0.5em",userSelect:"none"," > .label-text":{flex:1}," > input":{marginLeft:"0.5em"}},' [type="number"]':{maxWidth:"4em",textAlign:"center"}," .toolbox":{"&__toggle-btn":{padding:0,overflow:"hidden",border:"none",background:"transparent",cursor:"pointer",position:"absolute",outline:"none","::before":{content:"''",width:"4em",height:"4em",border:"solid 1px ".concat("#666"),borderRadius:"100%",background:"#eee",display:"block",position:"absolute",top:"50%",left:"50%",zIndex:-1}}}},".".concat("docked--right"),{top:"50%",right:0,transform:"translate(100%, -50%)"," .toolbox":{"&__toggle-btn":{width:"2.4em",height:"5em",top:"50%",right:"100%",transform:"translateY(-50%)","::before":{transform:"translate(-30%, -50%)"}},"&__tools > *":{display:"flex"}},".is--open":{transform:"translate(0%, -50%)"}}))},z={Number:T,Toggle:function(e){var t=e.label,a=e.onChange,n=e.toggled;return p.a.createElement("label",null,p.a.createElement("span",{className:"label-text"},t),p.a.createElement("input",{type:"checkbox",onChange:a,checked:n}))}},P=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this))).state={opened:!1},a.handleOpenClick=a.handleOpenClick.bind(Object(s.a)(Object(s.a)(a))),a}return Object(c.a)(t,e),Object(i.a)(t,[{key:"handleOpenClick",value:function(e){this.setState({opened:!this.state.opened})}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.position;return this.state.opened&&(a+=" is--open"),p.a.createElement("div",{className:"toolbox ".concat(Q.root," ").concat(a)},p.a.createElement("button",{className:"toolbox__toggle-btn",onClick:this.handleOpenClick},"\u2630"),p.a.createElement("div",{className:"toolbox__tools"},t))}}]),t}(u.Component),L={root:Object(m.css)({textAlign:"center",padding:"1em",borderBottom:"solid 1px #ccc",boxShadow:"0 0 1em 0.5em #00000020",background:"#eee",position:"fixed",top:0,left:0,right:0,zIndex:10," a":{color:"#333",textDecoration:"none",textTransform:"uppercase",padding:"1em",position:"relative",":hover::after":{content:"''",width:"100%",height:"2px",background:"#333",position:"absolute",bottom:0,left:0}}})},Y=Object(u.forwardRef)(function(e,t){var a=e.items;return p.a.createElement("nav",{className:"top-nav ".concat(L.root),ref:t},a.map(function(e,t){return p.a.createElement("a",{key:t,className:"top-nav__link title-font",href:e.url},e.label)}))}),q=[{label:"Men",url:"https://site.com/page/mens"},{label:"Women",url:"https://site.com/page/women"},{label:"Kids",url:"https://site.com/page/kids"},{label:"Customize",url:"https://site.com/page/customize"}],M=10,J=3,W=5,G=24,K=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(o.a)(this,Object(l.a)(t).call(this))).state=t.generateData({categoryCount:M,debug:!1,filterCount:J,filterChildCount:W,headerH:0,productCount:G,shelfOpened:!1,topNavH:0,topNavIsSticky:!1}),e.headerRef=Object(u.createRef)(),e.topNavRef=Object(u.createRef)(),e.handleCategoryCountChange=e.handleCategoryCountChange.bind(Object(s.a)(Object(s.a)(e))),e.handleDebugToggle=e.handleDebugToggle.bind(Object(s.a)(Object(s.a)(e))),e.handleFilterCountChange=e.handleFilterCountChange.bind(Object(s.a)(Object(s.a)(e))),e.handleFilterChildCountChange=e.handleFilterChildCountChange.bind(Object(s.a)(Object(s.a)(e))),e.handleHeaderIntersection=e.handleHeaderIntersection.bind(Object(s.a)(Object(s.a)(e))),e.handleNavIntersection=e.handleNavIntersection.bind(Object(s.a)(Object(s.a)(e))),e.handleProductCountChange=e.handleProductCountChange.bind(Object(s.a)(Object(s.a)(e))),e.handleScroll=e.handleScroll.bind(Object(s.a)(Object(s.a)(e))),e}return Object(c.a)(t,e),Object(i.a)(t,null,[{key:"parseQueryParams",value:function(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){var a=e.split("=");t[a[0]]=a[1]}),t}},{key:"updateQuery",value:function(e){var a=e._default,n=e.name,r=e.value;return function(){var e=window.location.search,o=[];if(e){var l=t.parseQueryParams(e);l[n]&&r===a?l[n]&&delete l[n]:l[n]=r,Object.keys(l).forEach(function(e){o.push("".concat(e,"=").concat(l[e]))})}else o.push("".concat(n,"=").concat(r));var i=o.length?"?".concat(o.join("&")):"";window.history.replaceState({},"","".concat(window.location.pathname).concat(i))}}},{key:"getStateFromQueryString",value:function(e){var a=Object(n.a)({},e),r=t.parseQueryParams(window.location.search);return Object.keys(r).forEach(function(e){if(void 0!==a[e]){var t=a[e],n=r[e];switch(typeof t){case"boolean":n=Boolean(n);break;case"number":n=+n}a[e]=n}}),a}},{key:"generateData",value:function(e){var t,a=Object(n.a)({},e);return a.categoryCount&&(a.categories=(t=a.categoryCount,Array(t).fill().map(function(e,t){return{label:"Category ".concat(t+1),url:"/category-".concat(t+1)}}))),a.filterCount&&a.filterChildCount&&(a.filters=function(e,t){for(var a={},n=0;n<e;n++)a["Filter ".concat(n+1)]=Array(t).fill().map(function(e,t){return{label:"Filter ".concat(t+1),url:"/filter-".concat(t+1)}});return a}(a.filterCount,a.filterChildCount)),a.productCount&&(a.products=function(e){return Array(e).fill().map(function(){return{title:"Title",subtitle:"Sub Title",price:"$100"}})}(a.productCount)),a}}]),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:function(){this.headerH=this.headerRef.current.offsetHeight,this.topNavH=this.topNavRef.current.offsetHeight,this.headerObserver=new IntersectionObserver(this.handleHeaderIntersection,{rootMargin:"-".concat(this.topNavH,"px 0px 0px 0px"),threshold:1}),this.headerObserver.observe(document.querySelector(".results-header-placeholder")),this.navObserver=new IntersectionObserver(this.handleNavIntersection,{rootMargin:"-".concat(this.topNavH+this.headerH,"px 0px 0px 0px"),threshold:0}),this.navObserver.observe(document.querySelector(".left-nav__wrapper-top-point")),this.navObserver.observe(document.querySelector(".left-nav__wrapper-btm-point")),this.navObserver.observe(document.querySelector(".left-nav__top-point")),this.navObserver.observe(document.querySelector(".left-nav__btm-point")),window.addEventListener("scroll",this.handleScroll,!1),this.setState(t.generateData(Object(n.a)({},t.getStateFromQueryString(this.state),{headerH:this.headerH,topNavH:this.topNavH})))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll),this.headerObserver.disconnect(),this.navObserver.disconnect()}},{key:"handleDebugToggle",value:function(){var e=!this.state.debug;this.setState({debug:e},t.updateQuery({_default:!1,name:"debug",value:e}))}},{key:"handleHeaderIntersection",value:function(e){e[0].intersectionRatio<1?this.setState({topNavIsSticky:!0}):this.setState({topNavIsSticky:!1})}},{key:"handleNavIntersection",value:function(e){var t=this;this.points||(this.points={}),e.forEach(function(e){var a=e.target.dataset.type;t.points[a]||(t.points[a]={}),t.points[a].visible=!!e.intersectionRatio}),console.log(this.scrollDirection,this.points)}},{key:"handleProductCountChange",value:function(e){this.setState(t.generateData({productCount:e}),t.updateQuery({_default:G,name:"productCount",value:e}))}},{key:"handleCategoryCountChange",value:function(e){this.setState(t.generateData({categoryCount:e}),t.updateQuery({_default:M,name:"categoryCount",value:e}))}},{key:"handleFilterCountChange",value:function(e){this.setState(t.generateData({filterCount:e,filterChildCount:this.state.filterChildCount}),t.updateQuery({_default:J,name:"filterCount",value:e}))}},{key:"handleFilterChildCountChange",value:function(e){this.setState(t.generateData({filterCount:this.state.filterCount,filterChildCount:e}),t.updateQuery({_default:W,name:"filterChildCount",value:e}))}},{key:"handleScroll",value:function(e){this.scrollDirection=this.prevScroll>window.scrollY?"up":"down",this.prevScroll=window.scrollY}},{key:"render",value:function(){var e,t,a=this.state,n=a.categories,r=a.categoryCount,o=a.debug,l=a.filters,i=a.filterCount,c=a.filterChildCount,s=a.headerH,d=a.productCount,h=a.products,m=a.topNavH,f=a.topNavIsSticky,b={height:"".concat(s,"px")},g="";return f&&(e="is--sticky",t={top:"".concat(m,"px")}),o&&(g+=" debug"),p.a.createElement(u.Fragment,null,p.a.createElement("div",{className:"".concat(C.root," ").concat(g)},p.a.createElement(Y,{items:q,ref:this.topNavRef}),p.a.createElement("div",{className:"body"},p.a.createElement(y,null),p.a.createElement(R,{headerClass:e,headerStyles:t,placeholderStyles:b,ref:this.headerRef,title:"Results Title"}),p.a.createElement("div",{className:"results-interface"},p.a.createElement(A,{categories:n,filters:l}),p.a.createElement(I,{items:h}))),p.a.createElement(k,null)),p.a.createElement(P,{position:"docked--right"},p.a.createElement(z.Toggle,{label:"Debug",onChange:this.handleDebugToggle,toggled:o}),p.a.createElement(z.Number,{label:"Product Count",min:1,onChange:this.handleProductCountChange,value:d}),p.a.createElement(z.Number,{label:"Category Count",min:1,onChange:this.handleCategoryCountChange,value:r}),p.a.createElement(z.Number,{label:"Filters Count",min:1,onChange:this.handleFilterCountChange,value:i}),p.a.createElement(z.Number,{label:"Filters Child Count",min:1,onChange:this.handleFilterChildCountChange,value:c})))}}]),t}(u.Component),U=document.getElementById("root");h.a.render(p.a.createElement(K,null),U)}},[[17,2,1]]]);
//# sourceMappingURL=main.b465ca5d.chunk.js.map